<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Página ESP32</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1 class="titulo">Projeto ESP32 - Temperatura e Umidade</h1>
  </header>

  <main>
    <h2 >Projeto proposto pelo professor Paulo. ESP32 com o sensor DHT22 mostrando em tempo real temperatura e umidade.</h2>
    <h3>Ver temperatura e umidade em tempo real</h3>

    <div id="dados">
      <p>Temperatura: <span id="temperatura">--</span> °C</p>
      <p>Umidade: <span id="umidade">--</span> %</p>
    </div>
  </main>

  <footer>
    <p>Universidade Estadual do Maranhão</p>
    <p>Curso de Engenharia de Computação</p>
  </footer>

  <script>
    async function leituraAtual() {
      try {
        const r = await fetch('/api/leitura', { cache: 'no-store' });
        if (!r.ok) throw new Error('HTTP ' + r.status);
        const { temperatura, umidade } = await r.json();

        document.getElementById('temperatura').textContent =
          (typeof temperatura === 'number') ? temperatura.toFixed(1) : '--';
        document.getElementById('umidade').textContent =
          (typeof umidade === 'number') ? umidade.toFixed(1) : '--';
      } catch (e) {
        console.log(e);
      }
    }
    leituraAtual();
    setInterval(leituraAtual, 2000);
  </script>
</body>
</html>
